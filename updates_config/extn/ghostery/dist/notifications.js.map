{"version":3,"file":"notifications.js","mappings":"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","sources":["webpack://@ghostery/extension-manifest-v2/./src/utils/common.js","webpack://@ghostery/extension-manifest-v2/./app/panel/utils/msg.js","webpack://@ghostery/extension-manifest-v2/./app/content-scripts/utils/msg.js","webpack://@ghostery/extension-manifest-v2/./app/data-images/popup/xImage.js","webpack://@ghostery/extension-manifest-v2/./app/data-images/popup/logoImage.js","webpack://@ghostery/extension-manifest-v2/./app/content-scripts/notifications.js"],"sourcesContent":["/**\n * Common Methods\n *\n * Methods and properties that are shared between app and src modules.\n * NOTE: In order to save space, this file should not have any module imports.\n *\n * Ghostery Browser Extension\n * https://www.ghostery.com/\n *\n * Copyright 2019 Ghostery, Inc. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0\n */\n\n// DO NOT IMPORT MODULES TO THIS FILE\n\n// Private variable that controls whether calls to log() produce the requested console output or do nothing\nlet _shouldLog = chrome.runtime.getManifest().debug || false;\n\n/**\n * Report whether logging is active\n * @memberOf BackgroundUtils\n *\n * @return {Boolean}\t\t\t\t\tTrue if logging is active and false otherwise\n */\nexport function isLog() {\n\treturn _shouldLog;\n}\n\n/**\n * Activate / deactivate logging\n * Allows modules like the console debugger to override the manifest debug setting\n * @memberOf BackgroundUtils\n *\n * @param  {Boolean} shouldActivate\t\tWhether logging should be activated or deactivated. Optional; defaults to true\n *\n * @return {undefined}\t\t\t\t\tNo explicit return value\n */\nexport function activateLog(shouldActivate = true) {\n\t_shouldLog = shouldActivate;\n}\n\n/**\n * Log to console regardless of log settings\n * @memberOf BackgroundUtils\n *\n * @param  {array} args \tES6 Rest parameter\n *\n * @return {boolean}\t\tAlways true\n */\nexport function alwaysLog(...args) {\n\t// check for error messages\n\tconst hasErrors = args.toString().toLowerCase().includes('error');\n\t// add timestamp to first position\n\targs.unshift(`${(new Date()).toLocaleTimeString()}\\t`);\n\n\tif (hasErrors) {\n\t\tconsole.error(...args); // eslint-disable-line no-console\n\t\tconsole.trace(); // eslint-disable-line no-console\n\t} else {\n\t\tconsole.log(...args); // eslint-disable-line no-console\n\t}\n\treturn true;\n}\n\n/**\n * Custom Debug Logger.\n * Unliked alwaysLog, only logs if logging is turned on\n * through the manifest and/or GhosteryDebugger\n * @memberOf BackgroundUtils\n *\n * @param  {array} args \tES6 Rest parameter\n *\n * @return {boolean}  \t\tfalse if disabled, otherwise true\n */\nexport function log(...args) {\n\tif (!_shouldLog) {\n\t\treturn false;\n\t}\n\n\treturn alwaysLog(...args);\n}\n\n/**\n * Get multiple prefs.\n * @memberOf BackgroundUtils\n *\n * @param  {array} args \tES6 Rest Parameter\n * @return {Promise} \t\tObject if multiple prefs, single value for one pref\n */\nexport function prefsGet(...args) {\n\treturn new Promise(((resolve, reject) => {\n\t\tchrome.storage.local.get(args.length ? args : null, (items) => {\n\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\tlog('prefsGet ERROR', chrome.runtime.lastError);\n\t\t\t\treject(chrome.runtime.lastError);\n\t\t\t} else {\n\t\t\t\tlet result = null;\n\t\t\t\tif (args.length <= 0) {\n\t\t\t\t\tresult = items;\n\t\t\t\t} else if (args.length === 1) {\n\t\t\t\t\tconst key = args[0]; // extract value from array\n\t\t\t\t\tif (items && items.hasOwnProperty(key)) {\n\t\t\t\t\t\tresult = items[key];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = {}; // instantiate an empty object\n\t\t\t\t\targs.forEach((key) => {\n\t\t\t\t\t\tresult[key] = null;\n\t\t\t\t\t\tif (items && items.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tresult[key] = items[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresolve(result);\n\t\t\t}\n\t\t});\n\t}));\n}\n\n/**\n * Set multiple prefs.\n * @memberOf BackgroundUtils\n *\n * @param  {Object} prefs \tjsonifyable key/value pairs of prefs\n * @return {Promise} \t\tprefs object which has been set, or error\n */\nexport function prefsSet(prefs) {\n\tif (prefs === undefined || prefs === null) {\n\t\tthrow new Error('Bad argument');\n\t}\n\treturn new Promise(((resolve, reject) => {\n\t\ttry {\n\t\t\tchrome.storage.local.set(prefs, () => {\n\t\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\t\talwaysLog('prefsSet ERROR', chrome.runtime.lastError);\n\t\t\t\t\treject(chrome.runtime.lastError);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(prefs);\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\talwaysLog('prefsSet ERROR', e);\n\t\t\treject(e);\n\t\t}\n\t}));\n}\n\n/**\n * Get/Set single pref\n * Use prefs for persisting basic values to local storage. For User\n * Configuration properties, use Conf (which calls prefs).\n * @memberOf BackgroundUtils\n *\n * @param  {string} key   \t\t\tpref name\n * @param  {*} \t\tvalue \t\t\tpref value\n * @return {Promise}\t\t\t\tvalue which has been obtained or set, or error\n */\nexport function pref(key, value) {\n\tif (typeof value === 'undefined') {\n\t\treturn prefsGet(key);\n\t}\n\treturn prefsSet({ [key]: value });\n}\n\n/**\n * Generate hash code for a string\n * Used for checking the hash of the backup file, easy validation check.\n * Modified code from: http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/\n * @memberOf BackgroundUtils\n *\n * @param  {string} str \tinput string\n * @return {string} \t\thash code string\n */\nexport function hashCode(str) {\n\tlet hash = 0;\n\tlet character;\n\tlet i;\n\n\tif (str.length === 0) {\n\t\treturn hash;\n\t}\n\n\tfor (i = 0; i < str.length; i++) {\n\t\tcharacter = str.charCodeAt(i);\n\t\thash = ((hash << 5) - hash) + character; // eslint-disable-line no-bitwise\n\t\thash &= hash; // eslint-disable-line no-bitwise\n\t}\n\n\treturn hash;\n}\n\n// source https://stackoverflow.com/a/38552302\nexport function parseJwt(token) {\n\tconst base64Url = token.split('.')[1];\n\tconst base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n\tconst jsonPayload = decodeURIComponent(\n\t\twindow.atob(base64)\n\t\t\t.split('')\n\t\t\t.map(c => `%${(`00${c.charCodeAt(0).toString(16)}`).slice(-2)}`)\n\t\t\t.join('')\n\t);\n\n\treturn JSON.parse(jsonPayload);\n}\n\nexport function getISODate() {\n\treturn new Date().toISOString().split('T')[0];\n}\n","/**\n * Message Utilities\n *\n * Ghostery Browser Extension\n * https://www.ghostery.com/\n *\n * Copyright 2019 Ghostery, Inc. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0\n */\n\nimport { log } from '../../../src/utils/common';\n\n/**\n * Default callback handler for sendMessage. Allows us to handle\n * 'Unchecked runtime.lastError: The message port closed before a response was received' errors.\n * This occurs when the `chrome.runtime.onmessage` handler returns `false` with no `callback()`\n * but `chrome.runtime.sendMessage` has been passed a default callback.\n */\nconst defaultCallback = () => {\n\tif (chrome.runtime.lastError) {\n\t\tlog('defaultCallback error:', chrome.runtime.lastError);\n\t}\n};\n\n/**\n * Send a message to the handlers in src/background wrapped in a\n * promise. This should be used for messages that require a callback.\n * @memberOf PanelUtils\n *\n * @param  {string} \tname \t\tmessage name\n * @param  {Object} \tmessage \tmessage data\n * @return {Promise}\n */\nexport function sendMessageInPromise(name, message, origin = '') {\n\treturn new Promise((resolve) => {\n\t\tchrome.runtime.sendMessage({\n\t\t\tname,\n\t\t\tmessage,\n\t\t\torigin,\n\t\t}, (response) => {\n\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\tlog(chrome.runtime.lastError, name, message);\n\t\t\t\tresolve(false);\n\t\t\t}\n\t\t\tresolve(response);\n\t\t});\n\t});\n}\n\n/**\n * Send a message to the handlers in src/background. This should be used for\n * messages that don't require a callback.\n * @memberOf PanelUtils\n *\n * @param  {string} \tname \t\tmessage name\n * @param  {Object} \tmessage \tmessage data\n * @param  {string} \torigin\t \tmessage origin\n * @param  {function} \tcallback \tcallback message\n * @return {Object}\t\tresponse\n * @todo  runtime.sendMessage does not return any value.\n */\nexport function sendMessage(name, message, origin = '', callback = defaultCallback()) {\n\tlog('Panel sendMessage: sending to background', name);\n\treturn chrome.runtime.sendMessage({\n\t\tname,\n\t\tmessage,\n\t\torigin,\n\t}, callback);\n}\n\n/**\n * Handle clicks on links with a fixed destination\n */\nexport function handleClickOnNewTabLink(e) {\n\te.preventDefault();\n\n\tlet linkTag = e.target;\n\twhile (!linkTag.href) {\n\t\tlinkTag = linkTag.parentElement;\n\t}\n\tconst { href } = linkTag;\n\n\tsendMessage('openNewTab', {\n\t\turl: href,\n\t\tbecome_active: true,\n\t});\n}\n\n/**\n * Send a message to open a Account.Subscription tab.\n * This should be used for messages that don't require a callback.\n * @memberOf PanelUtils\n */\nexport function openSubscriptionPage() {\n\tsendMessage('account.openSubscriptionPage');\n\twindow.close();\n}\n\n/**\n * Send a message to open a Checkout tab.\n * This should be used for messages that don't require a callback.\n * @memberOf PanelUtils\n */\nexport function openCheckoutPage(utm) {\n\tsendMessage('account.openCheckoutPage', { utm });\n\twindow.close();\n}\n\n/**\n * Send a message to open a Support tab based on the current user state.\n * This should be used for messages that don't require a callback.\n * @memberOf PanelUtils\n */\nexport function openSupportPage(e) {\n\te.preventDefault();\n\tsendMessage('account.openSupportPage');\n\twindow.close();\n}\n\n/**\n * Send a message to open Account-Web if signed in or the Account Hub page if not\n * This should be used for messages that don't require a callback.\n * @memberOf PanelUtils\n */\nexport function openAccountPageAndroid(e) {\n\te.preventDefault();\n\tsendMessage('openAccountAndroid');\n}\n","/**\n * Message Helper for Content Scripts\n *\n * Ghostery Browser Extension\n * https://www.ghostery.com/\n *\n * Copyright 2019 Ghostery, Inc. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0\n */\n/**\n * @namespace ContentScriptUtils\n */\nimport { log } from '../../../src/utils/common';\nimport { sendMessageInPromise as panelSendPromiseMessage, sendMessage as panelSendMessage } from '../../panel/utils/msg';\n\n/**\n * Message wrapper function\n * @param  {string} origin \t\tcontent script origin\n * @return {Object}\t\t\t\tset of APIs for handling messages\n */\nexport default function(origin) {\n\t/**\n\t * Send a message wrapped in a promise.\n\t * @memberOf  ContentScriptUtils\n\t *\n\t * @param  {string} \tname \t\tmessage name\n\t * @param  {Object} \tmessage \tmessage data\n\t * @return {Promise}\t\t\t\tresponse or null\n\t */\n\tfunction sendMessageInPromise(name, message) {\n\t\treturn panelSendPromiseMessage(name, message, origin);\n\t}\n\n\t/**\n\t * Send a message with an 'origin' parameter. This\n\t * will be picked up by handlers of messages coming from different context scripts.\n\t * @memberOf  ContentScriptUtils\n\t *\n\t * @param  {string} \tname \t\tmessage name\n\t * @param  {Object} \tmessage \tmessage data\n\t * @param  {function} \t[callback] \tcallback called by the message recipient\n\t */\n\tfunction sendMessage(name, message, callback) {\n\t\tlog(`origin ${origin} sending to handler`, name);\n\t\tpanelSendMessage(name, message, origin, callback);\n\t}\n\n\t/**\n\t * Send a message without an `origin` parameter. This will\n\t * be picked up by the general onMessageHandler in src/background.\n\t * @memberOf  ContentScriptUtils\n\t *\n\t * @param  {string} \tname \t\tmessage name\n\t * @param  {Object} \tmessage \tmessage data\n\t * @param  {function} \t[callback] \tcallback called by the message recipient\n\t */\n\tfunction sendMessageToBackground(name, message, callback) {\n\t\tlog(`origin ${origin} sending to background onMessageHandler`, name);\n\t\tpanelSendMessage(name, message, '', callback);\n\t}\n\n\treturn {\n\t\tsendMessageInPromise,\n\t\tsendMessage,\n\t\tsendMessageToBackground,\n\t};\n}\n","export default 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ3LjEgKDQ1NDIyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5GaWxsIDI8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR2hvc3RlcnktOC1wb3AtdXAtc3BlY3MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04MjkuMDAwMDAwLCAtMjk4LjAwMDAwMCkiIGZpbGw9IiMwNDcxOUEiPgogICAgICAgICAgICA8cGF0aCBkPSJNODM3LjA2MjI3OCwzMDQgTDg0MC41NzA5OTEsMzAwLjQ5MDg5OCBDODQxLjE0MDkyOCwyOTkuOTIxMzUgODQxLjE0MDkyOCwyOTguOTk3MzkgODQwLjU3MDk5MSwyOTguNDI3NDUzIEM4NDAuMDAxMDU0LDI5Ny44NTc1MTYgODM5LjA3NzA5NCwyOTcuODU3NTE2IDgzOC41MDkxMDIsMjk4LjQyNzQ1MyBMODM1LDMwMS45Mzc3MjIgTDgzMS40OTA4OTgsMjk4LjQyNzQ1MyBDODMwLjkyMTM1LDI5Ny44NTc1MTYgODI5Ljk5NzM5LDI5Ny44NTc1MTYgODI5LjQyNzQ1MywyOTguNDI3NDUzIEM4MjguODU3NTE2LDI5OC45OTczOSA4MjguODU3NTE2LDI5OS45MjEzNSA4MjkuNDI3NDUzLDMwMC40OTA4OTggTDgzMi45MzYxNjYsMzA0IEw4MjkuNDI3NDUzLDMwNy41MDkxMDIgQzgyOC44NTc1MTYsMzA4LjA3ODY1IDgyOC44NTc1MTYsMzA5LjAwMjYxIDgyOS40Mjc0NTMsMzA5LjU3MjU0NyBDODI5Ljk5NzM5LDMxMC4xNDI0ODQgODMwLjkyMTM1LDMxMC4xNDI0ODQgODMxLjQ4OTczMSwzMDkuNTcyNTQ3IEw4MzUsMzA2LjA2MjI3OCBMODM4LjUwOTEwMiwzMDkuNTcwOTkxIEM4MzkuMDc4NjUsMzEwLjE0MDkyOCA4NDAuMDAyNjEsMzEwLjE0MDkyOCA4NDAuNTcyNTQ3LDMwOS41NzA5OTEgQzg0MS4xNDI0ODQsMzA5LjAwMTA1NCA4NDEuMTQyNDg0LDMwOC4wNzcwOTQgODQwLjU3MjU0NywzMDcuNTA3NTQ2IEw4MzcuMDYyMjc4LDMwNCBaIiBpZD0iRmlsbC0yIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4='","export default 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODJweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgODIgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ3LjEgKDQ1NDIyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5HaG9zdGVyeSBMb2dvPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkxldHRlciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYxMy4wMDAwMDAsIC0zMDcuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHaG9zdGVyeS1Mb2dvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MTMuMDAwMDAwLCAzMDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR2hvc3R5Ij4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuMDQwOTA0MywxMC42MTY1OTQ1IEMxOS4wNDA5MDQzLDE0LjY2NjYwNSAxNS42MzA5Mjk5LDE3Ljk0OTgxMDMgMTEuNDI0NTQyNiwxNy45NDk4MTAzIEM3LjIxODE1NTM1LDE3Ljk0OTgxMDMgMy44MDgxODA4NywxNC42NjY2MDUgMy44MDgxODA4NywxMC42MTY1OTQ1IEMzLjgwODE4MDg3LDYuNTY2NTgzOTEgNy4yMTgxNTUzNSwzLjI4MzM3ODY4IDExLjQyNDU0MjYsMy4yODMzNzg2OCBDMTUuNjMwOTI5OSwzLjI4MzM3ODY4IDE5LjA0MDkwNDMsNi41NjY1ODM5MSAxOS4wNDA5MDQzLDEwLjYxNjU5NDUiIGlkPSJGaWxsLTEtQ29weS0xMCIgZmlsbD0iI0ZGRkZGRSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yMS42MzM3MTc4LDIwLjYwNTY5MzIgQzIwLjU3ODU2NDMsMTguMjkyNjAzIDIwLjM5Njg0NzQsMTYuMzMyNjYwNSAyMC4zNjg1Mjk3LDE1LjU2MjU5NDUgTDIwLjM2ODUyOTcsOS4yMjY1OTQ5IEMyMC4zNjg1Mjk3LDQuMzg2Mzc3MTEgMTYuMjMyMTU3NCwwLjQ2MjkxMTA2OCAxMS4xMjk5OTYsMC40NjI5MTEwNjggQzYuMDI3MjY1MzEsMC40NjI5MTEwNjggMS44OTA3NTA3LDQuMzg2Mzc3MTEgMS44OTA3NTA3LDkuMjI2NTk0OSBMMS44OTA3NTA3LDE1LjY1NDE4NyBDMS44NTEzMzM2NCwxNi40ODI2NTE4IDEuNjQ0MDAyNzUsMTguMzgyNjgwNCAwLjYyOTU0NzA1MiwyMC42MDU2OTMyIEMtMC43MzM5NzAyLDIzLjU5Mjg0OTQgMC4zOTQ0Njc2ODQsMjMuMjM2ODA5MiAxLjQwNTIyMzU4LDIyLjk5MTA5MzMgQzIuNDE1ODM3MTksMjIuNzQ2MzQxNiA0LjY3Mjg1NTI1LDIxLjc4Njg5MjYgNS4zNzc5NTEwNiwyMi45Njg3ODA2IEM2LjA4Mjc2MjI2LDI0LjE1MDExNzcgNi42NzA3NDUyOCwyNS4xNzYwOTE4IDguMzE2MTU4NTUsMjQuNTA3MTIxOSBDOS45NjE3MTQxMiwyMy44Mzg0Mjc2IDEwLjczNzEwNjEsMjMuNjE1NTc1NCAxMC45NzIwNDMxLDIzLjYxNTU3NTQgTDExLjI5MTY0ODYsMjMuNjE1NTc1NCBDMTEuNTI2MzAxMSwyMy42MTU1NzU0IDEyLjMwMTk3NzYsMjMuODM4NDI3NiAxMy45NDczOTA5LDI0LjUwNzEyMTkgQzE1LjU5MjgwNDIsMjUuMTc2MDkxOCAxNi4xODA1MDI2LDI0LjE1MDExNzcgMTYuODg1NzQwNywyMi45Njg3ODA2IEMxNy41OTA1NTE5LDIxLjc4Njg5MjYgMTkuODQ3NDI3NiwyMi43NDYzNDE2IDIwLjg1ODMyNTgsMjIuOTkxMDkzMyBDMjEuODY5MDgxNywyMy4yMzY4MDkyIDIyLjk5Njk1MDQsMjMuNTkyODQ5NCAyMS42MzM3MTc4LDIwLjYwNTY5MzIiIGlkPSJQYXRoLUNvcHktMjIiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOC4yNzgzMDY3OSw1LjI0MTU2MjE0IEM5LjI3MzQwOTcsNS4yNDE1NjIxNCAxMC4wODAxMDc2LDYuNDUyMzc0MTIgMTAuMDgwMTA3Niw3Ljk0NjUwMzE1IEMxMC4wODAxMDc2LDkuNDQwNDk0NDUgOS4yNzM0MDk3LDEwLjY1MTcxOTYgOC4yNzgzMDY3OSwxMC42NTE3MTk2IEM3LjI4MzIwMzg3LDEwLjY1MTcxOTYgNi40NzYzNjM2Nyw5LjQ0MDQ5NDQ1IDYuNDc2MzYzNjcsNy45NDY1MDMxNSBDNi40NzYzNjM2Nyw2LjQ1MjM3NDEyIDcuMjgzMjAzODcsNS4yNDE1NjIxNCA4LjI3ODMwNjc5LDUuMjQxNTYyMTQiIGlkPSJQYXRoLUNvcHktMjMiIGZpbGw9IiMwMEFFRjAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEuMTI5OTk2LDE2LjA1MzMzNzcgQzguOTM3MTU1MTQsMTYuMDUzMzM3NyA3LjA5MTI0MTM2LDE0LjAwNjIxMDEgNi41MzQ5OTEyMSwxMS43MjgzNzk1IEM3LjYwOTM1NTE1LDEzLjEyOTQwMSA5LjI2NzU3NTQxLDE0LjAyOTc2MjUgMTEuMTI5OTk2LDE0LjAyOTc2MjUgQzEyLjk5MjI3NDIsMTQuMDI5NzYyNSAxNC42NTAzNTIyLDEzLjEyOTQwMSAxNS43MjQ4NTg0LDExLjcyODM3OTUgQzE1LjE2ODYwODMsMTQuMDA2MjEwMSAxMy4zMjI0MDk5LDE2LjA1MzMzNzcgMTEuMTI5OTk2LDE2LjA1MzMzNzciIGlkPSJQYXRoLUNvcHktMjQiIGZpbGw9IiMwMEFFRjAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuOTgxNjg1MSwxMC42NTE3MTk2IEMxMi45ODU4NzA3LDEwLjY1MTcxOTYgMTIuMTc5NDU3NCw5LjQ0MDQ5NDQ1IDEyLjE3OTQ1NzQsNy45NDY1MDMxNSBDMTIuMTc5NDU3NCw2LjQ1MjM3NDEyIDEyLjk4NTg3MDcsNS4yNDE1NjIxNCAxMy45ODE2ODUxLDUuMjQxNTYyMTQgQzE0Ljk3NzM1NzMsNS4yNDE1NjIxNCAxNS43ODM0ODYsNi40NTIzNzQxMiAxNS43ODM0ODYsNy45NDY1MDMxNSBDMTUuNzgzNDg2LDkuNDQwNDk0NDUgMTQuOTc3MzU3MywxMC42NTE3MTk2IDEzLjk4MTY4NTEsMTAuNjUxNzE5NiIgaWQ9IlBhdGgtQ29weS0yNSIgZmlsbD0iIzAwQUVGMCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTI3LjQ0MTIxNzEsMTEuNDA1MTc3OCBMMzAuMjc5MDI0OCwxMS40MDUxNzc4IEwzMC4yNzkwMjQ4LDE1LjUwOTk4NzQgQzMwLjI3OTAyNDgsMTcuNTgwNzcwNiAyOS4yNDY4OTQ3LDE4Ljc2NDMxNjggMjcuMjU2NzcwNiwxOC43NjQzMTY4IEMyNS4yNjY5MjE2LDE4Ljc2NDMxNjggMjQuMjM1MjA0MSwxNy41ODA3NzA2IDI0LjIzNTIwNDEsMTUuNTA5OTg3NCBMMjQuMjM1MjA0MSw4Ljc3OTUxOTI1IEMyNC4yMzUyMDQxLDYuNzA4MzEzNDkgMjUuMjY2OTIxNiw1LjUyNTQ3MTUgMjcuMjU2NzcwNiw1LjUyNTQ3MTUgQzI5LjI0Njg5NDcsNS41MjU0NzE1IDMwLjI3OTAyNDgsNi43MDgzMTM0OSAzMC4yNzkwMjQ4LDguNzc5NTE5MjUgTDMwLjI3OTAyNDgsMTAuMDM3MDAxOCBMMjguMzYyNjI0MywxMC4wMzcwMDE4IEwyOC4zNjI2MjQzLDguNjQ5OTU0NDYgQzI4LjM2MjYyNDMsNy43MjU4MTk1NSAyNy45NTc1NTczLDcuMzc0NTg2MzIgMjcuMzEyNDc1OSw3LjM3NDU4NjMyIEMyNi42NjcyNTcxLDcuMzc0NTg2MzIgMjYuMjYxOTE0OSw3LjcyNTgxOTU1IDI2LjI2MTkxNDksOC42NDk5NTQ0NiBMMjYuMjYxOTE0OSwxNS42Mzk1NTIxIEMyNi4yNjE5MTQ5LDE2LjU2NDEwOTYgMjYuNjY3MjU3MSwxNi44OTcwMzQ3IDI3LjMxMjQ3NTksMTYuODk3MDM0NyBDMjcuOTU3NTU3MywxNi44OTcwMzQ3IDI4LjM2MjYyNDMsMTYuNTY0MTA5NiAyOC4zNjI2MjQzLDE1LjYzOTU1MjEgTDI4LjM2MjYyNDMsMTMuMjU0NDMzNCBMMjcuNDQxMjE3MSwxMy4yNTQ0MzM0IEwyNy40NDEyMTcxLDExLjQwNTE3NzgiIGlkPSJGaWxsLTMtQ29weS0yIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cG9seWxpbmUgaWQ9IkZpbGwtNC1Db3B5IiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjMzLjgxNjMyNTggMTguNDc2NTE1OCAzMS43MTgwMjk3IDE4LjQ3NjUxNTggMzEuNzE4MDI5NyA1LjUyNTQ3MTUgMzMuODE2MzI1OCA1LjUyNTQ3MTUgMzMuODE2MzI1OCAxMS4wNzU4Mzg1IDM2LjIwMDU2NTQgMTEuMDc1ODM4NSAzNi4yMDA1NjU0IDUuNTI1NDcxNSAzOC4zMzc0NTI0IDUuNTI1NDcxNSAzOC4zMzc0NTI0IDE4LjQ3NjUxNTggMzYuMjAwNTY1NCAxOC40NzY1MTU4IDM2LjIwMDU2NTQgMTIuOTI1ODY2OSAzMy44MTYzMjU4IDEyLjkyNTg2NjkgMzMuODE2MzI1OCAxOC40NzY1MTU4Ij48L3BvbHlsaW5lPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM5Ljc3NjQ1NzMsOC43Nzk2NjI0NCBDMzkuNzc2NDU3Myw2LjcwODk2NzI5IDQwLjg5NTE2NzQsNS41MjU0NzE1IDQyLjk0MjI2ODEsNS41MjU0NzE1IEM0NC45ODk5MzQ5LDUuNTI1NDcxNSA0Ni4xMDgwNzg5LDYuNzA4OTY3MjkgNDYuMTA4MDc4OSw4Ljc3OTY2MjQ0IEw0Ni4xMDgwNzg5LDE1LjUwOTg0NDIgQzQ2LjEwODA3ODksMTcuNTgwNTM5MyA0NC45ODk5MzQ5LDE4Ljc2NDMxNjggNDIuOTQyMjY4MSwxOC43NjQzMTY4IEM0MC44OTUxNjc0LDE4Ljc2NDMxNjggMzkuNzc2NDU3MywxNy41ODA1MzkzIDM5Ljc3NjQ1NzMsMTUuNTA5ODQ0MiBMMzkuNzc2NDU3Myw4Ljc3OTY2MjQ0IEwzOS43NzY0NTczLDguNzc5NjYyNDQgWiBNNDEuODYxNjIxOSwxNS42Mzk0MDM0IEM0MS44NjE2MjE5LDE2LjU2MzkyMTUgNDIuMjc5MzM0MSwxNi45MTU0MjE1IDQyLjk0MjI2ODEsMTYuOTE1NDIxNSBDNDMuNjA2MDUxMiwxNi45MTU0MjE1IDQ0LjAyMjYzMTMsMTYuNTYzOTIxNSA0NC4wMjI2MzEzLDE1LjYzOTQwMzQgTDQ0LjAyMjYzMTMsOC42NTAxMDMxNyBDNDQuMDIyNjMxMyw3LjcyNTcyNTkzIDQzLjYwNjA1MTIsNy4zNzQzNjY4MSA0Mi45NDIyNjgxLDcuMzc0MzY2ODEgQzQyLjI3OTMzNDEsNy4zNzQzNjY4MSA0MS44NjE2MjE5LDcuNzI1NzI1OTMgNDEuODYxNjIxOSw4LjY1MDEwMzE3IEw0MS44NjE2MjE5LDE1LjYzOTQwMzQgTDQxLjg2MTYyMTksMTUuNjM5NDAzNCBaIiBpZD0iRmlsbC01LUNvcHkiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01MC4wMTIwOTc4LDUuNTI1NDcxNSBDNTEuOTgzODgzNiw1LjUyNTQ3MTUgNTIuOTk3Mjg0Nyw2LjcwOTE1ODQ4IDUyLjk5NzI4NDcsOC43ODAwODI1NyBMNTIuOTk3Mjg0Nyw5LjE4NjM4MDg0IEw1MS4wODA5Mjc4LDkuMTg2MzgwODQgTDUxLjA4MDkyNzgsOC42NTAyMzYxMyBDNTEuMDgwOTI3OCw3LjcyNTgxOTU1IDUwLjcxMjA0MzIsNy4zNzQ1ODYzMiA1MC4wNjY3MDE1LDcuMzc0NTg2MzIgQzQ5LjQyMjMyMjYsNy4zNzQ1ODYzMiA0OS4wNTMxNjI5LDcuNzI1ODE5NTUgNDkuMDUzMTYyOSw4LjY1MDIzNjEzIEM0OS4wNTMxNjI5LDExLjMxMjY1MTYgNTMuMDE1MzAyNiwxMS44MTIxODAyIDUzLjAxNTMwMjYsMTUuNTEwMjY5IEM1My4wMTUzMDI2LDE3LjU4MTQ3NDggNTEuOTgzODgzNiwxOC43NjQzMTY4IDQ5Ljk5MzM5MjIsMTguNzY0MzE2OCBDNDguMDAzODYzNiwxOC43NjQzMTY4IDQ2Ljk3MTQ4MTksMTcuNTgxNDc0OCA0Ni45NzE0ODE5LDE1LjUxMDI2OSBMNDYuOTcxNDgxOSwxNC43MTUxMzU2IEw0OC44ODc4Mzg4LDE0LjcxNTEzNTYgTDQ4Ljg4NzgzODgsMTUuNjM5NTUyMSBDNDguODg3ODM4OCwxNi41NjM4Mjc5IDQ5LjI5MzU4NDMsMTYuODk2NzUzMSA0OS45MzgzNzU5LDE2Ljg5Njc1MzEgQzUwLjU4MzAyOTksMTYuODk2NzUzMSA1MC45ODgwODc4LDE2LjU2MzgyNzkgNTAuOTg4MDg3OCwxNS42Mzk1NTIxIEM1MC45ODgwODc4LDEyLjk3NjU3MzMgNDcuMDI2OTEwOSwxMi40Nzc0NjcyIDQ3LjAyNjkxMDksOC43ODAwODI1NyBDNDcuMDI2OTEwOSw2LjcwOTE1ODQ4IDQ4LjA0MDAzNjksNS41MjU0NzE1IDUwLjAxMjA5NzgsNS41MjU0NzE1IiBpZD0iRmlsbC02LUNvcHkiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iRmlsbC03LUNvcHkiIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNTMuNTkwOTA0NSA1LjUyNTQ3MTUgNTkuOTIyNTI2MiA1LjUyNTQ3MTUgNTkuOTIyNTI2MiA3LjM3NjEyMzk1IDU3Ljc4MTU0MTEgNy4zNzYxMjM5NSA1Ny43ODE1NDExIDE4LjQ3NjUxNTggNTUuNzMyNTg0NyAxOC40NzY1MTU4IDU1LjczMjU4NDcgNy4zNzYxMjM5NSA1My41OTA5MDQ1IDcuMzc2MTIzOTUgNTMuNTkwOTA0NSA1LjUyNTQ3MTUiPjwvcG9seWxpbmU+CiAgICAgICAgICAgICAgICA8cG9seWxpbmUgaWQ9IkZpbGwtOC1Db3B5IiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjYzLjE4MzY2NDMgMTAuOTgzMjM3NSA2Ni4wODEzNjg0IDEwLjk4MzIzNzUgNjYuMDgxMzY4NCAxMi44MzMxNjUyIDYzLjE4MzY2NDMgMTIuODMzMTY1MiA2My4xODM2NjQzIDE2LjYyNjAyNDQgNjYuODI5NzQ5OCAxNi42MjYwMjQ0IDY2LjgyOTc0OTggMTguNDc2NTE1OCA2MS4wNzM3MzAxIDE4LjQ3NjUxNTggNjEuMDczNzMwMSA1LjUyNTQ3MTUgNjYuODI5NzQ5OCA1LjUyNTQ3MTUgNjYuODI5NzQ5OCA3LjM3NTY4MTA3IDYzLjE4MzY2NDMgNy4zNzU2ODEwNyA2My4xODM2NjQzIDEwLjk4MzIzNzUiPjwvcG9seWxpbmU+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNzIuMjM5MTE5MywxOC40NzY1MTU4IEM3Mi4xMjg1NTcsMTguMTQzMzc1NCA3Mi4wNTM5Mjc1LDE3LjkzOTYwMTcgNzIuMDUzOTI3NSwxNi44ODU3ODQ1IEw3Mi4wNTM5Mjc1LDE0Ljg1MDMwMjMgQzcyLjA1MzkyNzUsMTMuNjQ3NjcxMSA3MS42NDY3ODIyLDEzLjIwMzYyNDggNzAuNzIwNTQ3MiwxMy4yMDM2MjQ4IEw3MC4wMTc1MDk3LDEzLjIwMzYyNDggTDcwLjAxNzUwOTcsMTguNDc2NTE1OCBMNjcuOTgwOTUzNywxOC40NzY1MTU4IEw2Ny45ODA5NTM3LDUuNTI1NDcxNSBMNzEuMDU0NTgzMyw1LjUyNTQ3MTUgQzczLjE2NDkzOTYsNS41MjU0NzE1IDc0LjA3MjkzMTgsNi41MDYxNTAwMiA3NC4wNzI5MzE4LDguNTA0NDI4NyBMNzQuMDcyOTMxOCw5LjUyMjAyODg3IEM3NC4wNzI5MzE4LDEwLjg1MzYwNCA3My42NDY1NzYzLDExLjcyMzY1ODUgNzIuNzM5NDEzMywxMi4xNDg4MjEyIEM3My43NTcyNzY3LDEyLjU3NDI2NTcgNzQuMDkwNjIxNywxMy41NTUwODUxIDc0LjA5MDYyMTcsMTQuOTA1Njg0OCBMNzQuMDkwNjIxNywxNi45MDM5NjM1IEM3NC4wOTA2MjE3LDE3LjUzMzE4MTcgNzQuMTA5MTQwOSwxNy45OTU4Mjk3IDc0LjMxMjU3NTQsMTguNDc2NTE1OCBMNzIuMjM5MTE5MywxOC40NzY1MTU4IEw3Mi4yMzkxMTkzLDE4LjQ3NjUxNTggWiBNNzAuMDE3NTA5Nyw3LjM3NTY0MDgxIEw3MC4wMTc1MDk3LDExLjM1MzE3MzcgTDcwLjgxMzU1NzcsMTEuMzUzMTczNyBDNzEuNTczMTIwMSwxMS4zNTMxNzM3IDcyLjAzNDk5MzgsMTEuMDIwNTk3IDcyLjAzNDk5MzgsOS45ODQxMTMyMSBMNzIuMDM0OTkzOCw4LjcwNzM1Njg2IEM3Mi4wMzQ5OTM4LDcuNzgyMjAxNzUgNzEuNzIwNzIwNyw3LjM3NTY0MDgxIDcwLjk5OTE2NCw3LjM3NTY0MDgxIEw3MC4wMTc1MDk3LDcuMzc1NjQwODEgTDcwLjAxNzUwOTcsNy4zNzU2NDA4MSBaIiBpZD0iRmlsbC05LUNvcHkiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iRmlsbC0xMC1Db3B5IiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9Ijc3LjE3Nzg2OCAxNC4xODQzMDM0IDc0LjYwMDM3NjQgNS41MjU0NzE1IDc2LjczMjQ2MTEgNS41MjU0NzE1IDc4LjI5MTEwODYgMTEuNDI3NzIxNiA3OS44NDgyMzM1IDUuNTI1NDcxNSA4MS43OTU0MDEgNS41MjU0NzE1IDc5LjIxNzkwOTMgMTQuMTg0MzAzNCA3OS4yMTc5MDkzIDE4LjQ3NjUxNTggNzcuMTc3ODY4IDE4LjQ3NjUxNTggNzcuMTc3ODY4IDE0LjE4NDMwMzQiPjwvcG9seWxpbmU+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=='","/**\n * Ghostery Notifications Content Script\n *\n * This file provides notification alerts for the CMP, update dialogs\n * and import/export functionality\n *\n * Ghostery Browser Extension\n * https://www.ghostery.com/\n *\n * Copyright 2020 Ghostery, Inc. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0\n */\n/**\n * @namespace  NotificationsContentScript\n */\nimport msgModule from './utils/msg';\nimport { log } from '../../src/utils/common';\nimport xImage from '../data-images/popup/xImage';\nimport logoImage from '../data-images/popup/logoImage';\n\nconst msg = msgModule('notifications');\nconst { sendMessage } = msg;\nconst { onMessage } = chrome.runtime;\n\n/**\n * Use to call init to initialize functionality\n * @var  {Object} initialized to an object with init method as its property\n */\nconst NotificationsContentScript = (function(win, doc) {\n\tconst ALERT_ID = 'ALERT_ID_6AEC0607-8CC8-4904-BDEB-00F947E5E3C2';\n\tlet CMP_DATA = {};\n\tlet CSS_INJECTED = false;\n\tlet ALERT_SHOWN = false;\n\tconst createEl = function(type) {\n\t\treturn doc.createElement(type);\n\t};\n\t/**\n\t * Append one or several children elements to parent\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @param  \t{Object} \tparent \tparent DOM element\n\t * @param \t{...Object} args \tchildren DOM element(s)\n\t */\n\tconst appendChild = function(parent, ...args) {\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tparent.appendChild(args[i]);\n\t\t}\n\t};\n\t/**\n\t * Inject base css for CMP popups\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t */\n\tconst injectCSS = function() {\n\t\tconst style = createEl('style');\n\t\tconst imp = ' !important;';\n\t\tconst reset = 'padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;';\n\n\t\tstyle.textContent =\n\t\t\t`@-webkit-keyframes pop${ALERT_ID} {` +\n\t\t\t'50% {' +\n\t\t\t'-webkit-transform:scale(1.2);' +\n\t\t\t'}' +\n\t\t\t'100% {' +\n\t\t\t'-webkit-transform:scale(1);' +\n\t\t\t'}' +\n\t\t\t'}' +\n\t\t\t`@keyframes pop${ALERT_ID} {` +\n\t\t\t'50% {' +\n\t\t\t'-webkit-transform:scale(1.2);' +\n\t\t\t'transform:scale(1.2);' +\n\t\t\t'}' +\n\t\t\t'100% {' +\n\t\t\t'-webkit-transform:scale(1);' +\n\t\t\t'transform:scale(1);' +\n\t\t\t'}' +\n\t\t\t'}' +\n\n\t\t\t`#${ALERT_ID}{${reset}\n\t\t\tborder:none${imp}\n\t\t\tbackground:#fff${imp}\n\t\t\tcolor:#fff${imp}\n\t\t\tdisplay:block${imp}\n\t\t\theight:auto${imp}\n\t\t\tmax-height:500px${imp}\n\t\t\tmargin:0${imp}\n\t\t\topacity:1${imp}\n\t\t\tpadding:0${imp}\n\t\t\tposition:fixed${imp}\n\t\t\tvisibility:visible${imp}\n\t\t\twidth:325px${imp}\n\t\t\tz-index:2147483647${imp}\n\t\t\t-moz-border-radius:6px${imp/* TODO should we switch to non-prefixed ones? */}\n\t\t\tborder-radius:6px${imp}\n\t\t\t-moz-box-shadow:0px 0px 20px #000${imp}\n\t\t\tbox-shadow:0px 0px 20px #000${imp}\n\t\t\t}` +\n\t\t\t`#${ALERT_ID} br{display:inline-block${imp}${reset}}` +\n\t\t\t`#${ALERT_ID} div{${\n\t\t\t\treset\n\t\t\t}letter-spacing:normal${imp\n\t\t\t}font:16px Roboto, sans-serif${imp\n\t\t\t}line-height:24px${imp\n\t\t\t}text-align:center${imp\n\t\t\t}text-shadow:none${imp\n\t\t\t}text-transform:none${imp\n\t\t\t}word-spacing:normal${imp\n\t\t\t}}` +\n\t\t\t`#${ALERT_ID} a{${\n\t\t\t\treset\n\t\t\t}border:none${imp\n\t\t\t}font-weight:500${imp\n\t\t\t}background:#fff${imp\n\t\t\t}color:#00aef0${imp\n\t\t\t}}` +\n\t\t\t`@media print{#${ALERT_ID}{display:none${imp}}}`;\n\n\t\tappendChild(doc.getElementsByTagName('head')[0], style);\n\t};\n\t/**\n\t * Destroy CMP or notification popup.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t */\n\tconst removeAlert = function() {\n\t\tconst el = doc.getElementById(ALERT_ID);\n\t\tif (el) {\n\t\t\tel.parentNode.removeChild(el);\n\t\t\tALERT_SHOWN = false;\n\t\t}\n\t};\n\n\t/**\n\t * Helper for creating of a closing button for popup.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @return {Object}  styled div DOM element\n\t */\n\tconst createCloseButton = function() {\n\t\tconst closeButton = createEl('div');\n\n\t\t// .button class\n\t\tcloseButton.style.cursor = 'pointer';\n\t\tcloseButton.style.setProperty(\n\t\t\t'-webkit-touch-callout',\n\t\t\t'none'\n\t\t);\n\n\t\tcloseButton.style.setProperty(\n\t\t\t'-webkit-user-select',\n\t\t\t'none'\n\t\t);\n\n\t\tcloseButton.style.setProperty(\n\t\t\t'-khtml-user-select',\n\t\t\t'none'\n\t\t);\n\n\t\tcloseButton.style.setProperty(\n\t\t\t'-moz-user-select',\n\t\t\t'none'\n\t\t);\n\n\t\tcloseButton.style.setProperty(\n\t\t\t'-ms-user-select',\n\t\t\t'none'\n\t\t);\n\n\t\tcloseButton.style.setProperty(\n\t\t\t'user-select',\n\t\t\t'none'\n\t\t);\n\n\t\t// The rest\n\t\tcloseButton.style.cssFloat = 'right';\n\t\tcloseButton.style.background = `url(${xImage}) no-repeat center`;\n\t\tcloseButton.style.backgroundSize = '12.9px 12.9px';\n\t\tcloseButton.style.width = '27.4px';\n\t\tcloseButton.style.height = '27.4px';\n\t\tcloseButton.style.margin = '4px 4px 4px 4px';\n\n\t\treturn closeButton;\n\t};\n\t/**\n\t * Helper for creating of an uniform popup header.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @return {Object}  styled div DOM element\n\t */\n\tconst createNotificationHeader = function() {\n\t\tconst header = createEl('div');\n\t\theader.style.backgroundColor = '#00aef0';\n\t\theader.style.borderTopLeftRadius = '6px';\n\t\theader.style.borderTopRightRadius = '6px';\n\t\theader.style.height = '46px';\n\t\theader.style.padding = '0 0 0 16px';\n\n\t\tconst logo = createEl('div');\n\n\t\tlogo.style.width = '82px';\n\t\tlogo.style.height = '100%';\n\n\t\tlogo.style.background = `url(${logoImage}) no-repeat center`;\n\n\t\tlogo.style.backgroundSize = '100% auto';\n\t\tlogo.style.cssFloat = 'left';\n\n\t\tappendChild(header, logo);\n\n\t\tconst closeButton = createCloseButton();\n\n\t\tappendChild(header, closeButton);\n\n\t\tconst clearDiv = createEl('div');\n\t\tclearDiv.style.clear = 'both';\n\n\t\tcloseButton.addEventListener('click', (e) => {\n\t\t\tremoveAlert();\n\t\t\tsendMessage('dismissCMPMessage', { cmp_data: CMP_DATA, reason: 'closeButton' });\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tappendChild(header, clearDiv);\n\n\t\treturn header;\n\t};\n\t/**\n\t * Helper for creating an uniform popup's content area.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @return {Object}  styled div DOM element\n\t */\n\tconst createNotificationContent = function(message, linkUrl, linkText, linkClickFunc) {\n\t\tconst content = createEl('div');\n\t\tcontent.style.borderRadius = '6px';\n\t\tcontent.style.setProperty(\n\t\t\t'background',\n\t\t\t'#fff',\n\t\t\t'important'\n\t\t);\n\n\t\tconst header = createNotificationHeader();\n\n\t\tappendChild(content, header);\n\t\tconst messageDiv = createEl('div');\n\n\t\t// Upgrade message\n\t\tmessageDiv.style.setProperty(\n\t\t\t'padding',\n\t\t\t'22px 35px 17px 35px',\n\t\t\t'important'\n\t\t);\n\n\t\tconst s = createEl('span');\n\t\ts.style.color = '#232323';\n\t\ts.style.border = 'none';\n\t\ts.style.fontWeight = '300';\n\t\ts.style.display = 'block';\n\n\t\tappendChild(s, doc.createTextNode(message));\n\n\t\tappendChild(messageDiv, s);\n\t\tappendChild(content, messageDiv);\n\n\t\t// Upgrade link\n\t\tconst linkDiv = createEl('div');\n\t\tlinkDiv.style.setProperty(\n\t\t\t'padding',\n\t\t\t'18px 35px 22px 35px',\n\t\t\t'important'\n\t\t);\n\n\t\tconst link = createEl('a');\n\t\tlink.style.color = '#00aef0';\n\t\tlink.href = linkUrl || '#';\n\t\tif (linkUrl) {\n\t\t\tlink.target = '_blank';\n\t\t}\n\t\tappendChild(link, doc.createTextNode(linkText));\n\n\t\tlink.addEventListener('click', linkClickFunc);\n\n\t\tappendChild(linkDiv, link);\n\t\tappendChild(content, linkDiv);\n\n\t\treturn content;\n\t};\n\n\t/**\n\t * Helper for creating top level popup element.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @return {Object}  styled div DOM element\n\t */\n\tconst createAlert = function() {\n\t\tlet alert_div = doc.getElementById(ALERT_ID);\n\t\tif (alert_div) {\n\t\t\talert_div.parentNode.removeChild(alert_div);\n\t\t}\n\n\t\talert_div = createEl('div');\n\t\talert_div.id = ALERT_ID;\n\n\t\talert_div.style.setProperty(\n\t\t\t'right',\n\t\t\t'20px',\n\t\t\t'important'\n\t\t);\n\t\talert_div.style.setProperty(\n\t\t\t'top',\n\t\t\t'15px',\n\t\t\t'important'\n\t\t);\n\n\t\talert_div.textContent = '';\n\n\t\tif (doc.getElementsByTagName('body')[0]) {\n\t\t\tappendChild(doc.body, alert_div);\n\t\t} else {\n\t\t\tappendChild(doc.getElementsByTagName('html')[0], alert_div);\n\t\t}\n\t\treturn alert_div;\n\t};\n\t/**\n\t * Helper for creating dialog with 'Browse' used\n\t * for import of user settings.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t */\n\tconst showBrowseWindow = function(translations) {\n\t\tif (ALERT_SHOWN) {\n\t\t\treturn;\n\t\t}\n\t\tconst content = createEl('div');\n\t\tcontent.style.borderRadius = '6px';\n\t\tcontent.style.setProperty(\n\t\t\t'background',\n\t\t\t'#fff',\n\t\t\t'important'\n\t\t);\n\n\t\tconst header = createNotificationHeader();\n\t\tappendChild(content, header);\n\t\tconst messageDiv = createEl('div');\n\n\t\tmessageDiv.style.setProperty(\n\t\t\t'padding',\n\t\t\t'22px 35px 22px 35px',\n\t\t\t'important'\n\t\t);\n\n\t\tmessageDiv.style.setProperty(\n\t\t\t'text-align',\n\t\t\t'center',\n\t\t\t'important'\n\t\t);\n\n\t\tconst s = createEl('span');\n\t\ts.style.color = '#232323';\n\t\ts.style.border = 'none';\n\t\ts.style.fontWeight = '300';\n\t\ts.id = 'ghostery-browse-window-span';\n\n\t\ts.style.setProperty(\n\t\t\t'margin',\n\t\t\t'22px auto 22px',\n\t\t\t'important'\n\t\t);\n\n\t\tappendChild(s, doc.createTextNode(translations.select_file_for_import));\n\t\tappendChild(messageDiv, s);\n\t\tappendChild(content, messageDiv);\n\n\t\tconst buttonDiv = createEl('div');\n\t\tbuttonDiv.id = 'ghostery-browse-window-button';\n\t\tbuttonDiv.style.setProperty(\n\t\t\t'padding',\n\t\t\t'2px 35px 28px 35px',\n\t\t\t'important'\n\t\t);\n\n\t\tbuttonDiv.style.setProperty(\n\t\t\t'text-align',\n\t\t\t'center',\n\t\t\t'important'\n\t\t);\n\n\t\t// buttonDiv.style.height = '50px';\n\n\t\tconst inputEl = createEl('input');\n\t\tinputEl.type = 'file';\n\t\tinputEl.name = 'image';\n\t\tinputEl.style.width = '1px';\n\t\tinputEl.style.height = '1px';\n\t\tinputEl.style.visibility = 'hidden';\n\n\t\tinputEl.addEventListener('change', () => {\n\t\t\tif (!inputEl.files.length) {\n\t\t\t\twhile (s.firstChild) {\n\t\t\t\t\ts.removeChild(s.firstChild);\n\t\t\t\t}\n\t\t\t\ts.appendChild(document.createTextNode(translations.file_was_not_selected));\n\t\t\t} else {\n\t\t\t\t// @EDGE We cannot send file object directly on Edge. Have to read file here\n\t\t\t\t// and send the content. Chrome and Firefox allow to send file object.\n\t\t\t\t// Also cannot use callback here as it always returns 'undefined'.\n\t\t\t\tconst fileToLoad = inputEl.files[0];\n\n\t\t\t\tconst fileReader = new FileReader();\n\t\t\t\tfileReader.onload = (fileLoadedEvent) => {\n\t\t\t\t\t// Workaround for Edge. Callback cannot be undefined.\n\t\t\t\t\tconst fallback = () => {\n\t\t\t\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\t\t\t\tlog('showBrowseWindow error:', chrome.runtime.lastError);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tchrome.runtime.sendMessage({\n\t\t\t\t\t\torigin: 'notifications',\n\t\t\t\t\t\tname: 'importFile',\n\t\t\t\t\t\tmessage: fileLoadedEvent.target.result\n\t\t\t\t\t}, fallback);\n\t\t\t\t};\n\n\t\t\t\tfileReader.readAsText(fileToLoad, 'UTF-8');\n\t\t\t}\n\t\t});\n\n\t\tappendChild(buttonDiv, inputEl);\n\n\t\tconst buttonEl = createEl('span');\n\t\tappendChild(buttonEl, doc.createTextNode(translations.browse_button_label));\n\t\tbuttonEl.style.backgroundColor = '#00aef0';\n\t\tbuttonEl.style.borderRadius = '3px';\n\t\tbuttonEl.style.height = '30px';\n\t\tbuttonEl.style.color = 'white';\n\t\tbuttonEl.style.cursor = 'pointer';\n\t\tbuttonEl.style.setProperty(\n\t\t\t'padding',\n\t\t\t'6px 9px 7px 9px',\n\t\t\t'important'\n\t\t);\n\n\t\tbuttonEl.addEventListener('click', () => {\n\t\t\tinputEl.click();\n\t\t});\n\n\t\tappendChild(buttonDiv, buttonEl);\n\t\tappendChild(content, buttonDiv);\n\n\t\tconst alert_div = createAlert();\n\t\tappendChild(alert_div, content);\n\t};\n\t/**\n\t * Helper for updating browse dialog's text to\n\t * reflect the result of an import of user settings.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t */\n\tconst updateBrowseWindow = function(result = {}) {\n\t\tconst s = doc.getElementById('ghostery-browse-window-span');\n\t\twhile (s.firstChild) {\n\t\t\ts.removeChild(s.firstChild);\n\t\t}\n\n\t\tif (result.type !== 'message') {\n\t\t\ts.style.color = '#e74055';\n\t\t} else {\n\t\t\tconst buttonDiv = doc.getElementById('ghostery-browse-window-button');\n\t\t\tif (buttonDiv) {\n\t\t\t\tbuttonDiv.parentNode.removeChild(buttonDiv);\n\t\t\t}\n\t\t\ts.style.color = '#232323';\n\t\t}\n\t\ts.innerHTML = result.text;\n\t};\n\t/**\n\t * Helper which executes 'Save' operation during export\n\t * of user settings.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t */\n\tconst exportFile = function(content, type) {\n\t\tconst textFileAsBlob = new Blob([content], { type: 'text/plain' });\n\t\tconst ext = type === 'Ghostery-Backup' ? 'ghost' : 'json';\n\t\tconst d = new Date();\n\t\tconst dStr = `${d.getMonth() + 1}-${d.getDate()}-${d.getFullYear()}`;\n\t\tconst fileNameToSaveAs = `${type}-${dStr}.${ext}`;\n\t\tlet url = '';\n\t\tif (window.URL) {\n\t\t\turl = window.URL.createObjectURL(textFileAsBlob);\n\t\t} else {\n\t\t\turl = window.webkitURL.createObjectURL(textFileAsBlob);\n\t\t}\n\n\t\tconst link = createEl('a');\n\t\tlink.href = url;\n\t\tlink.setAttribute('download', fileNameToSaveAs);\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t};\n\t/**\n\t * Show popup. It is called in an onMessage handler\n\t * for messages coming from background.js.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t *\n\t * @param {string} type \tthe type of notification to show\n\t * @param {object} options \tmessage data to pass to the notification\n\t */\n\tconst showAlert = function(type, options) {\n\t\tif (ALERT_SHOWN) {\n\t\t\treturn;\n\t\t}\n\t\t// only tear down the frame for upgrade notifications/walkthrough reminders\n\t\tlet alert_contents;\n\n\t\tif (type === 'showCMPMessage') {\n\t\t\talert_contents = createNotificationContent(\n\t\t\t\toptions.campaign.Message,\n\t\t\t\toptions.campaign.Link,\n\t\t\t\toptions.campaign.LinkText,\n\t\t\t\t() => {\n\t\t\t\t\tremoveAlert();\n\t\t\t\t\tsendMessage('dismissCMPMessage', { cmp_data: CMP_DATA, reason: 'link' });\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tconst alert_div = createAlert();\n\t\tappendChild(alert_div, alert_contents);\n\t};\n\t/**\n\t * Initialize functionality of this script. Set listener\n\t * for messages coming from background.js.\n\t * @memberOf NotificationsContentScript\n\t * @package\n\t * @todo  investigate if we need to explicitly return values in listeners.\n\t *\n\t * @return {boolean}\n\t */\n\tconst _initialize = function() {\n\t\tonMessage.addListener((request, sender, sendResponse) => {\n\t\t\ttry {\n\t\t\t\tconst alertMessages = [\n\t\t\t\t\t'showCMPMessage',\n\t\t\t\t\t'showBrowseWindow'\n\t\t\t\t];\n\t\t\t\tconst { name, message } = request;\n\n\t\t\t\tlog('notifications.js received message', name);\n\n\t\t\t\tif (alertMessages.includes(name)) {\n\t\t\t\t\tif (!CSS_INJECTED) {\n\t\t\t\t\t\tCSS_INJECTED = true;\n\t\t\t\t\t\tinjectCSS();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (name === 'showCMPMessage') {\n\t\t\t\t\tCMP_DATA = message.data;\n\t\t\t\t\tshowAlert('showCMPMessage', {\n\t\t\t\t\t\tcampaign: CMP_DATA\n\t\t\t\t\t});\n\t\t\t\t\tALERT_SHOWN = true;\n\t\t\t\t} else if (name === 'showBrowseWindow') {\n\t\t\t\t\tshowBrowseWindow(message.translations);\n\t\t\t\t\tALERT_SHOWN = true;\n\t\t\t\t} else if (name === 'onFileImported') {\n\t\t\t\t\tupdateBrowseWindow(message);\n\t\t\t\t} else if (name === 'exportFile') {\n\t\t\t\t\tconst { content, type } = message;\n\t\t\t\t\texportFile(content, type);\n\t\t\t\t} else {\n\t\t\t\t\tlog('Unexpected message type (not handled):', request.name);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tlog('Failed to handle message from request:', request.name, e);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// message was successfully handled\n\t\t\tsendResponse();\n\t\t\treturn undefined;\n\t\t});\n\t};\n\n\treturn {\n\t\t/**\n\t\t * Initialize functionality of this script.\n\t\t * @memberOf NotificationsContentScript\n\t\t * @public\n\t\t */\n\t\tinit() {\n\t\t\t_initialize();\n\t\t}\n\t};\n}(window, document));\n\nNotificationsContentScript.init();\n"],"names":["_shouldLog","isLog","activateLog","shouldActivate","alwaysLog","args","hasErrors","log","prefsGet","resolve","reject","items","result","key","prefsSet","prefs","e","pref","value","hashCode","str","hash","character","i","parseJwt","token","base64","jsonPayload","c","getISODate","defaultCallback","name","message","origin","response","callback","handleClickOnNewTabLink","linkTag","href","openSubscriptionPage","openCheckoutPage","utm","openSupportPage","openAccountPageAndroid","sendMessageInPromise","sendMessage","sendMessageToBackground","msg","onMessage","win","doc","ALERT_ID","CMP_DATA","CSS_INJECTED","ALERT_SHOWN","createEl","type","appendChild","parent","injectCSS","style","imp","reset","removeAlert","el","createCloseButton","closeButton","xImage","createNotificationHeader","header","logo","logoImage","clearDiv","createNotificationContent","linkUrl","linkText","linkClickFunc","content","messageDiv","s","linkDiv","link","createAlert","alert_div","showBrowseWindow","translations","buttonDiv","inputEl","fileToLoad","fileReader","fileLoadedEvent","fallback","buttonEl","updateBrowseWindow","exportFile","textFileAsBlob","ext","d","dStr","fileNameToSaveAs","url","showAlert","options","alert_contents","_initialize","request","sender","sendResponse","alertMessages"],"sourceRoot":""}